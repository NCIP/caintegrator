<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="gov.nih.nci.caintegrator2.application.study">

    <!-- Create typedef's for the enums -->
    <typedef name="Visibility" class="gov.nih.nci.caintegrator2.common.GenericEnumUserType"> 
	   <param name="enumClass">gov.nih.nci.caintegrator2.application.study.Visibility</param> 
	</typedef> 
	
	<typedef name="Status" class="gov.nih.nci.caintegrator2.common.GenericEnumUserType"> 
       <param name="enumClass">gov.nih.nci.caintegrator2.application.study.Status</param> 
    </typedef> 

	<class name="StudyConfiguration" table="STUDY_CONFIGURATION" lazy="true" polymorphism="explicit">
		<cache usage="read-write" />
        
		<id name="id" type="long" column="ID">
			<generator class="native" />
		</id>
	
		<property name="visibility" type="Visibility" column="VISIBILITY"/>
		
		<property name="status" type="Status" column="STATUS"/>
    
        <list name="clinicalConfigurationCollection" lazy="true" cascade="all">
            <cache usage="read-write" />
            <key column="STUDY_CONFIGURATION_ID" not-null="true"/>
            <list-index column="LIST_INDEX"/>
            <one-to-many class="gov.nih.nci.caintegrator2.application.study.AbstractClinicalSourceConfiguration"/>
        </list>
    
        <list name="genomicDataSources" lazy="true" cascade="save-update,merge">
            <cache usage="read-write" />
            <key column="STUDY_CONFIGURATION_ID" not-null="true"/>
            <list-index column="LIST_INDEX"/>
            <one-to-many class="gov.nih.nci.caintegrator2.application.study.GenomicDataSourceConfiguration"/>
        </list>
    
        <list name="imageAnnotationConfigurations" lazy="true" cascade="all">
            <cache usage="read-write" />
            <key column="STUDY_CONFIGURATION_ID" not-null="true"/>
            <list-index column="LIST_INDEX"/>
            <one-to-many class="gov.nih.nci.caintegrator2.application.study.ImageAnnotationConfiguration"/>
        </list>
    
        <list name="imageDataSources" lazy="true" cascade="all">
            <cache usage="read-write" />
            <key column="STUDY_CONFIGURATION_ID" not-null="true"/>
            <list-index column="LIST_INDEX"/>
            <one-to-many class="gov.nih.nci.caintegrator2.application.study.ImageDataSourceConfiguration"/>
        </list>
        
		<many-to-one name="study" class="gov.nih.nci.caintegrator2.domain.translational.Study" column="STUDY_ID"
		    lazy="proxy" cascade="save-update,merge" />
		    
        <many-to-one name="studyLogo" class="gov.nih.nci.caintegrator2.application.study.StudyLogo" column="STUDY_LOGO_ID"
            lazy="proxy" cascade="save-update,merge" />
	</class>
</hibernate-mapping>